(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(17),a=t.n(o),i=t(8),u=t(7),s=t.n(u),l=t(18),d=t(3),f=(t(5),t(0)),j=function(e){var n=e.filter,t=e.onFilterChange;return Object(f.jsxs)("div",{className:"filter",children:["Search: "," ",Object(f.jsx)("input",{value:n,onChange:t})]})},h=function(e){return Object(f.jsxs)("form",{onSubmit:e.addPerson,className:"formContainer",children:[Object(f.jsxs)("div",{className:"formBody",children:["Full Name: "," ",Object(f.jsx)("input",{value:e.newName,onChange:e.handlePersonChange})]}),Object(f.jsxs)("div",{className:"formBody",children:["Number: "," ",Object(f.jsx)("input",{value:e.newPhone,onChange:e.handlePhoneChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{style:{marginLeft:150,marginBottom:5,marginTop:10,backgroundColor:"green",color:"white"},type:"submit",children:"ADD"})})]})},b={display:"flex",flexWrap:"wrap"},m={width:250,marginBottom:20,borderWidth:2,borderStyle:"solid",textAlign:"center",marginLeft:20,backgroundColor:"#ACE7FF"},O=function(e){var n=e.persons,t=e.results,r=e.handleDelete;return Object(f.jsx)("div",{style:b,children:t&&t.length>0?t.map((function(e,n){return Object(f.jsxs)("div",{style:m,children:[Object(f.jsx)("p",{children:e.name}),Object(f.jsx)("p",{children:e.number}),Object(f.jsx)("button",{style:{marginLeft:3,marginBottom:5,backgroundColor:"red",color:"white"},onClick:function(){return r(e.id)},children:"DELETE"})]},e.name)})):n.map((function(e){return Object(f.jsxs)("div",{style:m,children:[Object(f.jsx)("p",{children:e.name}),Object(f.jsx)("p",{children:e.number}),Object(f.jsx)("button",{style:{marginLeft:3,marginBottom:5,backgroundColor:"red",color:"white"},onClick:function(){return r(e.id)},children:"DELETE"})]},e.name)}))})},p=t(4),g=t.n(p),x="/api/persons/",v=function(){return g.a.get(x).then((function(e){return e.data}))},w=function(e){return g.a.post(x,e).then((function(e){return e.data}))},C=function(e,n){return g.a.put("".concat(x,"/").concat(e),n).then((function(e){return e.data}))},y=function(e){return g.a.delete("".concat(x,"/").concat(e))},k=function(e){var n=e.notif;return null===n?null:Object(f.jsx)("div",{className:"notification",children:n})},N=function(){var e=Object(r.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),a=Object(d.a)(o,2),u=a[0],b=a[1],m=Object(r.useState)(""),p=Object(d.a)(m,2),g=p[0],x=p[1],N=Object(r.useState)(""),S=Object(d.a)(N,2),D=S[0],E=S[1],P=Object(r.useState)([]),L=Object(d.a)(P,2),B=L[0],T=L[1],F=Object(r.useState)("*** message for you ***"),A=Object(d.a)(F,2),J=A[0],W=A[1];Object(r.useEffect)((function(){v().then((function(e){c(e)}))}),[]);var I=function(){var e=Object(l.a)(s.a.mark((function e(n){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=t.find((function(e){return e.name===u})),t.map((function(e){return e.name})).includes(u)?window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&(M(r.id),b(""),x(""),c(t),W("'".concat(u,"' has a new phone number: '").concat(g,"'")),setTimeout((function(){W(null)}),5e3)):w(o={name:u,number:g}).then((function(e){console.log(e),c(t.concat(o)),b(""),x(""),W("'".concat(u,"' has been added!'")),setTimeout((function(){W(null)}),5e3)})).catch((function(e){W(e.response.data.error)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(e){var n=t.find((function(n){return n.id===e})),r=Object(i.a)(Object(i.a)({},n),{},{number:g});C(e,r).then((function(n){c(t.map((function(t){return t.id!==e?t:n})))})).catch((function(n){W("'".concat(u,"' was already deleted from server")),c(t.filter((function(n){return n.id!==e}))),setTimeout((function(){W(null)}),5e3)}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(j,{filter:D,onFilterChange:function(e){e.preventDefault(),E(e.target.value);var n=t.filter((function(e){return e.name.toLowerCase().includes(D.toLowerCase())}));e.target.value?T(n):T(t)}}),Object(f.jsx)("h3",{children:"Add a New"}),Object(f.jsx)(h,{addPerson:I,newName:u,handlePersonChange:function(e){return b(e.target.value)},newPhone:g,handlePhoneChange:function(e){return x(e.target.value)}}),Object(f.jsx)(k,{notif:J}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(O,{results:B,persons:t,handleDelete:function(e){if(!window.confirm("Do you really want to delete?"))return null;y(e).then((function(){c(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(N,{})}),document.getElementById("root"))},5:function(e,n,t){}},[[43,1,2]]]);
//# sourceMappingURL=main.25a69d80.chunk.js.map